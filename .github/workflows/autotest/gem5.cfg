#特殊变量:特殊变量使用"$xx$"括起来
#sublog:当前work的log文件夹,比如:"./log_root/[hash]/work1",由脚本在运行时替换
#如果是pre-work或者post-work,则sublog代表当前commit的log文件夹,比如"./log_root/[hash]"
#tid:当前work所分配的线程id,比如最大线程5,tid=0~4中的任意一个,只能在work-xxx中使用
#binfile:single模式下,binfile指定待测试文件的完整路径名称
#numa:使用numactrl来对任务进行分配核,需要任务具有numacores变量,脚本会自动生成合适的numactrl参数,比如numa -m 0 -C 0-7

#ci运行时当前目录即为仓库根目录
[global]
debug_mode = false
#指定log的输出路径
log_root = ./log_root

#编译线程
compile_thread = 70
#gcpt路径
gcpt_path = /nfs-nvme/home/share/zyy/shared_payloads/gem5-gcpt-restore/gcpt.bin
ref_so_path = /nfs-nvme/home/share/zyy/shared_payloads/gem5-ref-so/riscv64-nemu-interpreter-so
#checkpoints 搜索路径
#格式: <path1 level> ; <path2 level>
#可以这样写:binpath = checkpoints.paths ;test-diff/*/*.bin 2 
#他会自动在paths文件中对每一行路径搜索,也会搜索test-diff/*/*.bin
#每个glob路径后可以带一个数字,代表分类级数,比如home/a/b/c.txt,c.txt被分类了3次(a/b/c),因此填3
#如果不带数字,则默认为1,即使用文件名作为分类
ck_path = /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gobmk_nngs_364600000000_0.0400083/0/_4600001000_.gz 4 ;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/perlbench_checkspam_697850000000_0.142824/0/_1850001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/perlbench_splitmail_432700000000_0.489789/0/_700001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/perlbench_diffmail_30400000000_0.581/0/_6400001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/leslie3d_149850000000_0.109273/0/_5850001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/GemsFDTD_665500000000_0.234708/0/_1500001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bwaves_1437800000000_0.661268/0/_5800001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/libquantum_128700000000_0.127766/0/_700001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/xalancbmk_174600000000_0.205097/0/_6600001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_expr2_66600000000_0.199712/0/_2600001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_166_51650000000_0.168722/0/_3650001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_200_105250000000_0.198201/0/_1250001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_scilab_62500000000_0.236942/0/_6500001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_typeck_151200000000_0.205826/0/_7200001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_g23_2200000000_0.177227/0/_2200001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_cpdecl_44550000000_0.240069/0/_4550001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_s04_68650000000_0.200102/0/_4650001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_expr_50350000000_0.192247/0/_2350001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gamess_cytosine_289000000000_0.107228/0/_1000001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gamess_triazolium_48350000000_0.0882613/0/_350001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gamess_gradient_1319250000000_0.134337/0/_7250001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gobmk_13x13_36150000000_0.110322/0/_4150001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gobmk_trevord_57400000000_0.180581/0/_1400001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gobmk_trevorc_145200000000_0.155962/0/_1200001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gobmk_nngs_61600000000_0.173741/0/_5600001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gobmk_score2_262550000000_0.110785/0/_6550001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/cactusADM_5200000000_0.823897/0/_5200001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/lbm_751550000000_0.51771/0/_7550001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/zeusmp_145800000000_0.13048/0/_1800001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/calculix_4666800000000_0.339694/0/_2800001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/namd_1060850000000_0.119413/0/_4850001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/astar_rivers_224350000000_0.147495/0/_350001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/astar_biglakes_98500000000_0.212072/0/_2500001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/sjeng_1439300000000_0.142236/0/_7300001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/hmmer_retro_588300000000_0.0940773/0/_4300001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/hmmer_nph3_163100000000_0.138082/0/_3100001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/tonto_1516450000000_0.300131/0/_4450001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bzip2_html_428600000000_0.266374/0/_4600001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bzip2_source_193500000000_0.152052/0/_1500001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bzip2_combined_183900000000_0.21803/0/_7900001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bzip2_chicken_54250000000_0.222422/0/_6250001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bzip2_program_392450000000_0.09919/0/_450001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/bzip2_liberty_106600000000_0.357205/0/_2600001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/milc_847950000000_0.146956/0/_7950001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gromacs_1283150000000_0.192695/0/_3150001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/dealII_408750000000_0.148779/0/_750001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/h264ref_foreman_401300000000_0.237367/0/_1300001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/h264ref_sss_3709150000000_0.259792/0/_5150001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/soplex_pds_106350000000_0.100014/0/_2350001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/soplex_ref_319350000000_0.179121/0/_7350001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/mcf_234550000000_0.127543/0/_2550001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/sphinx3_1843050000000_0.119702/0/_3050001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/omnetpp_172700000000_0.512105/0/_4700001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/povray_675400000000_0.100589/0/_3400001000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/astar_biglakes_10080000000_0.000500/0/_10080000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/astar_rivers_163460000000_0.077510/0/_163460000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bwaves_1003220000000_0.036592/0/_1003220000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bzip2_chicken_100620000000_0.040579/0/_100620000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bzip2_combined_105460000000_0.035474/0/_105460000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bzip2_html_112100000000_0.012040/0/_112100000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bzip2_liberty_100760000000_0.008827/0/_100760000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bzip2_program_144540000000_0.016578/0/_144540000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/bzip2_source_105300000000_0.053440/0/_105300000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/cactusADM_1176540000000_0.040129/0/_1176540000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/calculix_1050940000000_0.001285/0/_1050940000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/dealII_1011220000000_0.163493/0/_1011220000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gamess_cytosine_1062340000000_0.033190/0/_1062340000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gamess_gradient_330520000000_0.039854/0/_330520000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gamess_triazolium_1086180000000_0.048463/0/_1086180000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_166_18020000000_0.107532/0/_18020000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_200_101780000000_0.065840/0/_101780000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_cpdecl_100600000000_0.185687/0/_100600000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_expr_100480000000_0.027985/0/_100480000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_expr2_110520000000_0.000769/0/_110520000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_g23_121840000000_0.074353/0/_121840000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_s04_11260000000_0.043689/0/_11260000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_scilab_11340000000_0.008344/0/_11340000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gcc_typeck_0_0.001997/0/_0_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/GemsFDTD_1041040000000_0.022405/0/_1041040000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gobmk_13x13_119860000000_0.121261/0/_119860000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gobmk_nngs_130440000000_0.062423/0/_130440000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gobmk_score2_11900000000_0.022523/0/_11900000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gobmk_trevorc_10220000000_0.002535/0/_10220000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gobmk_trevord_0_0.000441/0/_0_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/gromacs_1092740000000_0.062396/0/_1092740000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/h264ref_foreman.baseline_130080000000_0.069027/0/_130080000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/h264ref_foreman.main_117520000000_0.007382/0/_117520000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/h264ref_sss_121100000000_0.051610/0/_121100000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/hmmer_nph3_0_0.000100/0/_0_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/hmmer_retro_0_0.000047/0/_0_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/lbm_106860000000_0.126943/0/_106860000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/leslie3d_1013300000000_0.166727/0/_1013300000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/libquantum_1006500000000_0.149838/0/_1006500000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/mcf_102780000000_0.057845/0/_102780000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/milc_103620000000_0.223319/0/_103620000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/namd_100000000_0.003233/0/_100000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/omnetpp_17660000000_0.027564/0/_17660000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/perlbench_checkspam_101080000000_0.063982/0/_101080000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/perlbench_diffmail_120000000_0.000379/0/_120000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/perlbench_splitmail_120300000000_0.009158/0/_120300000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/povray_16460000000_0.052035/0/_16460000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/sjeng_1004480000000_0.034448/0/_1004480000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/soplex_pds-50_107520000000_0.076232/0/_107520000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/soplex_ref_118920000000_0.039326/0/_118920000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/sphinx3_1198520000000_0.044581/0/_1198520000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/tonto_1126700000000_0.038989/0/_1126700000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/wrf_1127960000000_0.036887/0/_1127960000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/xalancbmk_133280000000_0.099969/0/_133280000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/zeusmp_1040160000000_0.036425/0/_1040160000000_.gz 4;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gcb_o2_20m/take_cpt/namd_100000000_0.003233/0/_100000000_.gz 4 ;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_scilab_62500000000_0.236942/0/_6500001000_.gz 4 ;
    /nfs-nvme/home/share/checkpoints_profiles/spec06_rv64gc_o2_50m/take_cpt/gcc_scilab_52200000000_0.0454201/0/_4200001000_.gz 4

[iteration]
working_mode=single
#允许最多同时运行的checkpoints
max_process=60
#迭代次数
num = 1
#结束后不做延迟
end_delay= 0
#忽略迭代中的错误(仍会执行except并最终返回-1)
#迭代次数为1时不用关心
except_mode = ignore
#运行时动态分配处理器核心
smode=dy
#静态分配处理器核心范围(不用关心)
srange=1,2

[mail]
enable = false
mail_host = smtp.163.com
mail_sender = user@163.com
mail_license = ******
mail_receivers = user1@163.com;user2@163.com 



[pre-work]
pre-task = 
task = scons build/RISCV/gem5.opt -j{compile_thread}
except-task = echo gem5 build error!

#当前目录即为仓库根目录
[work-rungem5]
binpath = {ck_path}
#禁用numa
numacores = 0
pre-task = 
task = ./build/RISCV/gem5.opt \
    --outdir=$sublog$ \
    ./configs/example/fs.py \
    --caches --l2cache --enable-difftest --difftest-ref-so {ref_so_path} \
    --xiangshan --cpu-type=DerivO3CPU \
    --mem-type=DDR3_1600_8x8 --mem-size=8GB \
    --cacheline_size=64 --l1i_size=64kB --l1i_assoc=8 --l1d_size=64kB --l1d_assoc=8 --l2_size=1MB --l2_assoc=8 \
    --generic-rv-cpt=$binfile$ \
    --gcpt-restorer={gcpt_path} \
    --bp-type=LTAGE --indirect-bp-type=ITTAGE --l3cache \
    --l3_size=6MB --l3_assoc=6 -s 1 \
    --warmup-insts=800 --warmup-insts-no-switch=50000010 --maxinsts=100000010
post-task = echo run successfully at $binfile$
except-task = echo gem5 running error at $binfile$!


[post-work]
task= 
post-task = echo run finish
except-task = 